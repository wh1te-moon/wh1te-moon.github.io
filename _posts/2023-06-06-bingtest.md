---
layout: page
title: testbing
tags: ai
categories: study
---

```
code segment
start:

    mov ax, data
    mov ds, ax
    mov es, ax


    
    scroll macro n, ulr, ulc, lrr, lrc, att           
        mov ah, 6                                     
        mov al, n                                     
        mov ch, ulr                                   
        mov cl, ulc                                   
        mov dh, lrr                                   
        mov dl, lrc                                   
        mov bh, att                                   
        int 10h
    endm
   
    curse macro cury, curx
        mov ah, 2                                     
        mov dh, cury                                  
        mov dl, curx                                  
        mov bh, 0                                     
        int 10h
    endm

    input_word macro off, len                         
        local next, for1, for2, for3, for4, for5, move, insert, out1, additional, exist, exit
        mov ah, 0ah                                   
        lea dx, word
        int 21h
        mov ax, off
        cmp ax, 0
        jnz next
        call warning
        next:
        mov bl, off                               
        sub bl, 0                                     
        jnz insert                                    
        cld                                           
        mov cx, cnt                                   
        for1:                                      
            jcxz additional                                 
            push cx                                   
            mov ax, cx                            
            dec ax
            xor bx, bx
            mov bl, 100                             
            mul bl                                    
            mov di, ax                            
            lea si, word[2]                           
            mov cl, [si-1]                            
            for2:
                lodsb
                cmp al, words[di]                     
                jb out1                               
                cmp al, words[di]
                ja move                               
                inc di
                loop for2                             
                cmp words[di], ' '                    
                jz exist
                out1:
                    pop cx
                    loop for1
                    push cx
                    jmp move
                additional:
                    push 0
                    jmp insert
                exist:
                    scroll 4, 5, 1, 9, 78, 71h        
                    curse 7, 20
                    mov ah, 09h
                    lea dx, word_exist_msg
                    int 21h
                    mov ah, 0                         
                    int 16h       
                    scroll 4, 5, 1, 9, 78, 71h            
                    curse 7, 4
                    mov ah, 09h
                    lea dx, str1
                    int 21h
                    mov is_exist, 1
                    jmp exit
                    
        move:
            std                                       
            mov ax, cnt                               
            xor bx, bx
            mov bl, 100
            mul bl                                    
            lea bx, words                             
            add ax, bx                                
            dec ax                                    
            mov si, ax
            add ax, 100                               
            mov di, ax
            mov ax, cnt                               
            pop cx                                    
            sub ax, cx                                
            mov now, cx                               
            xor bx, bx
            mov bl, 100 
            mul bl
            mov cx, ax                                
            jcxz insert
            for3:
                lodsb                                 
                stosb                                 
                loop for3                              
            insert:
                cld
                mov ax, now
                xor bx, bx
                mov bl, 100                            
                mul bl                                
                lea bx, words
                add ax, bx
                mov bx, off
                add ax, bx                            
                mov di, ax
                lea si, word[2]
                xor cx, cx
                mov cl, [si-1]
                mov ax, len
                sub ax, cx
                push ax 
                for4:
                    lodsb
                    stosb
                    loop for4
                pop cx
                for5:
                    mov al, ' '
                    stosb
                    loop for5
        exit:      
    endm
    
    modify_word macro off, len                        
        local for1, for2
        mov ah, 0ah                                   
        lea dx, word
        int 21h
        cld 
        mov cx, now 
        mov ax, cx
        dec ax
        xor bx, bx
        mov bl, 100                            
        mul bl                                        
        lea bx, words
        add ax, bx
        mov bx, off
        add ax, bx                                    
        mov di, ax
        lea si, word[2]
        xor cx, cx
        mov cl, [si-1]
        mov ax, len                                   
        sub ax, cx
        push ax 
        for1:
            lodsb
            stosb
            loop for1
        pop cx
        for2:
            mov al, ' '
            stosb
            loop for2
    endm 
    
    delete_word macro                                 
        local for
        mov ax, pos                                   
        cld                                               
        dec ax
        xor bx, bx
        mov bl, 100
        mul bl                                        
        lea bx, words                                 
        add ax, bx                                    
        mov di, ax
        add ax, 100                                   
        mov si, ax
        mov ax, cnt                                   
        mov cx, pos                                
        sub ax, cx                                    
        inc ax                                        
        xor bx, bx
        mov bl, 100 
        mul bl
        mov cx, ax                                    
        for:
            lodsb                                     
            stosb                                     
            loop for   
    endm


          
    import:                                           
        mov al, 0                                     
        mov ah, 3DH                                   
        lea dx, file
        int 21h
        mov file_code, ax                             
        mov ah, 3FH                                   
        mov bx, file_code                             
        mov cx, 6400
        lea dx, words                                 
        int 21h
        mov bl, 100 
        div bl                                        
        mov cnt, ax      
        mov bx, file_code                             
        mov ah, 3EH                                   
        int 21h
               
    ui:                                               
        scroll 0, 0, 0, 24, 79, 02                    
        scroll 25, 0, 0, 24, 79, 30h                  
        scroll 23, 1, 1, 3, 78, 71h                   
        scroll 23, 5, 1, 9, 78, 71h                   
        scroll 23, 11, 1, 12,78, 71h                 
        scroll 23, 13, 1, 15,78, 72h                 
        scroll 23, 17, 1, 18,38, 71h                 
        scroll 23, 17, 40, 18,78, 71h                
        scroll 23, 19, 1, 23,38, 72h                 
        scroll 23, 19, 40, 23, 78, 72h                
    
    call init_str                                     
    
    choose:
        mov ah, 0                                     
        int 16h                                           
        mov ah, 0eh                                   
        int 10h                                              
        cmp al, 48                                    
        jz export                               
        cmp al, 49                                    
        jz search
        cmp al, 50                                    
        jz input
        cmp al, 51                                    
        jz modify                                    
        cmp al, 52                                    
        jz delete 
        scroll 4, 5, 1, 9, 78, 71h                    
        curse 7, 4  
        mov ah, 09h
        lea dx, error_msg                             
        int 21h                                      
        mov ah, 0
        int 16h
        curse 7, 4                                    
        mov ah, 09h                                  
        lea dx, str1
        int 21h
        jmp choose
    search:                                           
        lea dx, fun1                                 
        call funstr                                   
        curse 7, 12                                  
        call search_exact_like
        search_exit:
            jmp choose
    input:                                             
        mov is_exist, 0
        lea dx, fun2                          
        call funstr                                   
        curse 7, 12                                    
        input_word 0, 20                              
        mov ax, is_exist
        cmp ax, 1
        jz input_exit                                 
        inc cnt                                       
        curse 13, 12
        input_word 20, 40                             
        curse 20, 12                                
        input_word 60, 20                             
        curse 20, 51
        input_word 80, 20                             
        call clear                                    
        input_exit:
            jmp choose
    modify:                                           
        lea dx, fun3                                   
        call funstr                                   
        curse 7, 12
        call find                                     
        mov cx, pos                                 
        cmp cx, -1                                    
        jz modify_exit                        
        mov now, cx
        curse 13, 12
        modify_word 20, 40                            
        curse 20, 12
        modify_word 60, 20                            
        curse 20, 51
        modify_word 80, 20                            
        call clear
        modify_exit:
            jmp choose 
    delete:                                        
        lea dx, fun4                                 
        call funstr                                  
        curse 7, 12                                   
        call find                                    
        mov cx, pos
        cmp cx, -1                                
        jz delete_exit
        delete_word                                  
        dec cnt                                    
        call clear                                  
        delete_exit:
            jmp choose        
                 
    export:                                           
        lea dx, file         
        mov al, 1                                     
        mov ah, 3DH                                   
        int 21h
        mov file_code, ax                             
        mov ax, cnt                                   
        mov bl, 100
        mul bl
        mov cx, ax
        mov ah, 40H                                   
        mov bx, file_code                             
        lea dx, words                                 
        int 21h       
        mov bx, file_code                             
        mov ah, 3EH                                   
        int 21h
         
    exit:        
        call exit_str                                 
        mov ax, 4c00h                                 
        int 21h  
    
   
    init_str proc                                     
        push ax
        push dx
        curse 2, 35
        mov ah, 09h                                   
        lea dx, str0                                
        int 21h
        curse 12, 4
        mov ah, 09h                                   
        lea dx, str2
        int 21h
        curse 18, 4
        mov ah, 09h                                   
        lea dx, str3
        int 21h
        curse 18, 43
        mov ah, 09h                                   
        lea dx, str4
        int 21h
        curse 7, 4     
        mov ah, 09h                                   
        lea dx, str1
        int 21h        
        pop dx
        pop ax
        ret
    init_str endp
    
    exit_str proc                                     
        push dx
        push ax
        scroll 0, 1, 1, 23, 78, 72h                   
        curse 11, 28
        mov ah, 09h
        lea dx, str5
        int 21h
        scroll 1, 1, 1, 23, 78, 72h                   
        curse 12, 38
        mov ah, 09h
        lea dx, str6
        int 21h
        mov ah, 0                                     
        int 16h       
        pop ax
        pop dx
        ret       
    exit_str endp    
    
    clear proc
        push ax
        push bx
        push cx
        push dx
        scroll 4, 5, 1, 9, 78, 71h                    
        scroll 3, 13, 1, 15,78, 72h                  
        scroll 4, 19, 1, 23,38, 72h                  
        scroll 4, 19, 40, 23, 78, 72h                 
        curse 7, 23
        mov ah, 09h                                   
        lea dx, success_msg
        int 21h
        mov ah, 0                                     
        int 16h                                      
        scroll 4, 5, 1, 9, 78, 71h                    
        curse 7, 4     
        mov ah, 09h
        lea dx, str1                                  
        int 21h
        pop dx
        pop cx
        pop bx
        pop ax
        ret
    clear endp
    
    funstr proc                                       
        push ax
        push bx
        push cx
        push dx
        scroll 23, 5, 1, 6, 78, 71h                   
        scroll 23, 7, 1, 9, 78, 72h                   
        curse 6, 4                                 
        mov ah, 09h
        pop dx        
        int 21h
        pop cx
        pop bx
        pop ax
        ret
    funstr endp  
    
    find proc                                         
        push dx
        push cx
        push bx                                      
        push ax
        mov ah, 0ah                                   
        lea dx, word
        int 21h
        call warning
        cld                                       
        mov cx, cnt                                   
        jcxz notequal_find                            
        for1_find:                                 
            push cx                                   
            mov ax, cx                            
            dec ax
            xor bx, bx
            mov bl, 100
            mul bl                                    
            mov di, ax
            dec di                                    
            xor cx, cx                                       
            lea si, word[2]                           
            mov cl, [si-1]                            
            for2_find:
                inc di
                lodsb
                cmp al, words[di]
                jne outfor_find                       
                loop for2_find                        
                inc di                                
                cmp words[di], ' '                    
                jnz outfor_find                       
                pop cx                                
                mov pos, cx
                jmp find_exit                         
                outfor_find:                          
                    pop cx                            
                    loop for1_find
            notequal_find:                            
                mov pos, -1
                scroll 4, 5, 1, 9, 78, 71h            
                curse 7, 15
                mov ah, 09h
                lea dx, not_find_msg
                int 21h
                mov ah, 0                             
                int 16h       
                scroll 4, 5, 1, 9, 78, 71h            
                curse 7, 4                          
                mov ah, 09h
                lea dx, str1
                int 21h
            find_exit:                               
                pop ax
                pop bx
                pop cx
                pop dx
                ret
        find endp  
                    
    search_exact_like proc
        push ax
        push bx
        push cx
        push dx
        mov like_cnt, 0                               
        mov ah, 0ah                                   
        lea dx, word                                  
        int 21h
        call warning                                  
        cld                                       
        mov cx, cnt                                   
        jcxz notequal_search                          
        for1_search:                                 
            push cx                                   
            mov ax, cx                            
            dec ax
            xor bx, bx
            mov bl, 100
            mul bl                                    
            mov di, ax
            dec di                                    
            xor cx, cx                                       
            lea si, word[2]                           
            mov cl, [si-1]                            
            for2_search:
                inc di
                lodsb
                cmp al, words[di]
                jne outfor_search                    
                loop for2_search                   
                inc di                              
                cmp words[di], ' '                   
                jz search_exact                     
                pop cx
                push cx
                mov pos, cx
                inc like_cnt                         
                outfor_search:                     
                    pop cx                            
                    loop for1_search
                cmp like_cnt, 0
                jnz search_like                       
            notequal_search:                         
                scroll 4, 5, 1, 9, 78, 71h         
                curse 7, 15                          
                mov ah, 09h
                lea dx, not_find_msg
                int 21h
                mov ah, 0                          
                int 16h       
                scroll 4, 5, 1, 9, 78, 71h          
                curse 7, 4                        
                mov ah, 09h
                lea dx, str1
                int 21h
                jmp search_exact_like_exit
            search_exact:
                cld
                pop ax
                dec ax
                xor bx, bx
                mov bl, 100                            
                mul bl                              
                lea bx, words
                add ax, bx                            
                add ax, 20                            
                mov si, ax                                               
                lea di, word
                mov cx, 40
                for_explain:                          
                    lodsb
                    stosb
                    loop for_explain
                curse 13, 12
                mov word[39], '$'
                mov ah, 09h
                lea dx, word
                int 21h
                lea di, word
                mov cx, 20
                for_synonym:                          
                    lodsb                           
                    stosb
                    loop for_synonym 
                curse 20, 12
                mov word[19], '$'
                mov ah, 09h
                lea dx, word
                int 21h
                lea di, word 
                mov cx, 20
                for_antonym:                          
                    lodsb
                    stosb
                    loop for_antonym
                curse 20, 51  
                mov word[19], '$'
                mov ah, 09h
                lea dx, word
                int 21h
                mov ah, 0                             
                int 16h                             
                call clear
                jmp search_exact_like_exit
            search_like:
                scroll 23, 11, 1, 13,78, 71h         
                scroll 23, 14, 1, 23,78, 72h         
                curse 13, 7
                mov ah, 09h
                lea dx, search_like_msg
                int 21h
                mov cx, like_cnt
                search_like_for1:
                    push cx
                    mov ax, pos
                    inc pos                     
                    dec ax
                    xor bx, bx
                    mov bl, 100                            
                    mul bl                          
                    lea bx, words
                    add ax, bx                      
                    mov si, ax                                   
                    lea di, word
                    mov cx, 20
                    search_like_for2:
                        lodsb
                        stosb
                        loop search_like_for2
                    curse 20, 14
                    mov word[19], '$'
                    mov ah, 09h
                    lea dx, word                                                                        
                    int 21h
                    scroll 1, 15, 1, 21,78, 72h
                    pop cx
                    dec cx
                    cmp cx, 0
                    jnz search_like_for1
                    mov ah, 0                         
                    int 16h                     
                    scroll 4, 5, 1, 9, 78, 71h        
                    scroll 13, 11, 1, 23, 78, 30h     
                    scroll 23, 11, 1, 12,78, 71h    
                    scroll 23, 13, 1, 15,78, 72h     
                    scroll 23, 17, 1, 18,38, 71h     
                    scroll 23, 17, 40, 18,78, 71h    
                    scroll 23, 19, 1, 23,38, 72h    
                    scroll 23, 19, 40, 23, 78, 72h   
                    curse 12, 4
                    mov ah, 09h
                    lea dx, str2
                    int 21h
                    curse 18, 4
                    mov ah, 09h
                    lea dx, str3
                    int 21h
                    curse 18, 43
                    mov ah, 09h
                    lea dx, str4
                    int 21h
                    curse 7, 4     
                    mov ah, 09h
                    lea dx, str1
                    int 21h
                    curse 7, 4     
                    mov ah, 09h
                    lea dx, str1
                    int 21h
                    call init_str                     
        search_exact_like_exit:    
            pop dx
            pop cx
            pop bx
            pop ax
            ret
    search_exact_like endp 
    
    warning proc                                      
        push dx
        push cx
        push bx
        push ax
        mov ah, 09h
        lea dx, waiting_msg
        int 21h
        pop ax
        pop bx
        pop cx
        pop dx
        ret
    warning endp    
      
ends

end start
```